import{a as m}from"./chunk-4GBS2WJF.js";import{a as d,c as g}from"./chunk-YSKS7LQL.js";import{a as w}from"./chunk-DTNHGE5H.js";import{g as l}from"./chunk-SDAS6MWB.js";import{f as a}from"./chunk-GYJWRRWW.js";var p=["U","R","D","L","ALL"],S=["UR","DR","DL","UL"].concat(p);function b(){let e=0;function n(){let i=w(12);return i!==0&&e++,i<=6?`${i}+`:`${12-i}-`}let r=[];function t(i){for(let o of i)r.push(`${o}${n()}`)}return t(S),r.push("y2"),t(p),e<2?b():r.join(" ")}var P="node:w-orker-_threa-ds",L=()=>P.replace(/-/g,""),I=typeof globalThis.Worker>"u"&&typeof globalThis.WorkerNavigator>"u";function R(e,n){return a(this,null,function*(){let{Worker:r}=yield import(L()),t=new r(e,n);return t.unref(),d(t)})}function U(e,n){return a(this,null,function*(){let r;if(I)return R(e,{eval:n?.eval});if(n?.eval){let t=new Blob([e],{type:"application/javascript"});e=URL.createObjectURL(t)}return r=new globalThis.Worker(e,{type:n?n.type:void 0}),r})}function E(){return a(this,null,function*(){return import.meta.resolve("./search-worker-entry.js")})}function T(){return new URL("./search-worker-entry.js",import.meta.url)}function x(){return a(this,null,function*(){return m.expose=!1,(yield import("./chunk-XG3EQIGC.js")).WORKER_ENTRY_FILE_URL})}function A(){return new Worker(new URL("./search-worker-entry.js",import.meta.url),{type:"module"})}function M(e){try{let n=globalThis.location?.origin,r=e.origin;return!!n&&!!r&&n!==r}catch{return!1}}function u(e){return a(this,null,function*(){let n=new URL(e,import.meta.url),r=M(n);try{return k(n,r)}catch{return k(n,!r)}})}function k(e,n){return a(this,null,function*(){return new Promise((r,t)=>a(this,null,function*(){try{e||t(new Error("Could not get worker entry file URL."));let i=e;if(n){let s=`import ${JSON.stringify(e.toString())};`,W=new Blob([s],{type:"text/javascript"});i=new URL(URL.createObjectURL(W))}let o=yield U(i,{type:"module"});o.unref?.();let v=s=>{t(s)},f=s=>{s==="comlink-exposed"?r(y(o)):t(new Error(`wrong module instantiation message ${s}`))};o.nodeWorker?o.nodeWorker.once("message",f):(o.addEventListener("error",v,{once:!0}),o.addEventListener("message",s=>f(s.data),{once:!0}))}catch(i){t(i)}}))})}function O(){return a(this,null,function*(){return new Promise((e,n)=>a(this,null,function*(){try{let r=A(),t=o=>{n(o)},i=o=>{o==="comlink-exposed"?e(y(r)):n(new Error(`wrong module instantiation message ${o}`))};r.addEventListener("error",t,{once:!0}),r.addEventListener("message",o=>i(o.data),{once:!0})}catch(r){n(r)}}))})}function y(e){let n=g(e),r=e.terminate.bind(e);return{insideAPI:n,outsideAPI:{terminate:r}}}var F=[];function h(){return a(this,null,function*(){let e=N();F.push(e);let{insideAPI:n}=yield e;return n.setDebugMeasurePerf(c.logPerf),n.setScramblePrefetchLevel(c.scramblePrefetchLevel),e})}function N(){return a(this,null,function*(){globalThis.location?.protocol==="file:"&&console.warn("This current web page is loaded from the local filesystem (a URL that starts with `file://`). In this situation, `cubing.js` may be unable to generate scrambles or perform searches in some browsers. See: https://js.cubing.net/cubing/scramble/#file-server-required");function e(r){return`Module worker instantiation${r?` ${r}`:""} failed`}let n=[[()=>a(this,null,function*(){return u(yield E())}),"using `import.meta.resolve(\u2026)",null],[O,"using inline `new URL(\u2026, import.meta.url)`","may"],[()=>a(this,null,function*(){return u(T())}),"using `new URL(\u2026, import.meta.url)`","will"],[()=>a(this,null,function*(){return u(yield x())}),"using the `esbuild` workaround","will"]];for(let[r,t,i]of n)try{let o=yield r();return i&&c.showWorkerInstantiationWarnings&&console.warn(`Module worker instantiation required ${t}. \`cubing.js\` ${i} not support this fallback in the future.`),o}catch{c.showWorkerInstantiationWarnings&&console.warn(`${e(t)}, falling back.`)}throw new Error(`${e()}. There are no more fallbacks available. If you are using Firefox, please update to version 114 or later.`)})}var $;function D(){return $??=h()}function K(e){return a(this,null,function*(){switch(e){case"clock":return l.fromString(yield b())}let r=yield _(e);return l.fromString(r)})}function _(e){return a(this,null,function*(){return c.forceNewWorkerForEveryScramble,(c.forceNewWorkerForEveryScramble?yield h():yield D()).insideAPI.randomScrambleStringForEvent(e)})}var c={logPerf:!0,scramblePrefetchLevel:"auto",disableStringWorker:!1,forceNewWorkerForEveryScramble:!1,showWorkerInstantiationWarnings:!0};export{K as a};
