import{a as h}from"./chunk-DTNHGE5H.js";import{f as V,g as E}from"./chunk-GYJWRRWW.js";function k(e){if(e<2)return e;let t=1;for(let r=2;r<=e;r++)t*=r;return t}function x(e){let t=Array(e);for(let r=0;r<e;r++)t[r]=r;return t}function Z(e){e=e.slice();let t=e.length,r=k(t-1),n=0;for(;t>1;){t--;let o=e[0];n+=o*r;for(let i=0;i<t;i++){let l=e[i+1];e[i]=l-(l>o)}r/=t}return n}function $(e,t){let r=[],n=k(t-1)/2,o=0;for(let i=0;i<t-1;i++)r[i]=e/n|0,e%=n,n/=t-1-i;r[t-1]=0;for(let i=t-2;i>=0;i--)for(let l=i+1;l<t;l++)r[l]>=r[i]?r[l]++:o^=1;return o===1&&([r[t-2],r[t-1]]=[r[t-1],r[t-2]]),r}function D(e){return Z(e)>>1}var[be,ke]=(()=>{let e=new Int8Array(49152),t=new Int8Array(4096*12);for(let o=0;o<4096;o++)for(let i=0,l=0;i<12;i++)o>>>i&1&&(e[i<<12|o]=l,t[l<<12|o]=i,l++);function r(o){let i=4095,l=19958400,a=0;for(let f=0;f<10;f++){let _=o[f];a+=e[i|_<<12]*l,i&=~(1<<_),l/=11-f}return a}function n(o,i){let l=4095,a=19958400,f=0;for(let _=0;_<10;_++){let c=o/a|0;o-=c*a,f^=c&1;let p=t[l|c<<12];i[_]=p,l&=~(1<<p),a/=11-_}return i[10]=t[l|f<<12],i[11]=t[l|(f^1)<<12],i}return[r,n]})();function g(e,t){let r=[];for(let n=0;n<t.length;n++)r[n]=e[t[n]];return r}function U(e){let t=[];for(let r=0;r<e.length;r++)t[e[r]]=r;return t}function I(e,t){let r=[];for(let n=0;n<t;n++)r[n]=n;for(let n=0;n<e.length;n++)r[e[n]]=e[(n+1)%e.length];return r}function v(e,t){return e.length===0?x(t):e.map(r=>I(r,t)).reduce(g)}function ee(e,t){let r=Array(4);for(let l=0;l<4;l++)r[l]=(e.co[l]+t.co[l])%3;let n=g(e.mp,t.mp),o=g(e.wp,t.wp),i=g(e.cp,t.cp);return{co:r,mp:n,wp:o,cp:i}}var Ie={co:[0,0,0,0],mp:x(12),wp:x(12),cp:[0,1,2,3]},te={co:[2,0,0,0],mp:x(12),wp:I([1,9,11],12),cp:[0,1,2,3]},re={co:[0,2,0,0],mp:x(12),wp:I([0,7,2],12),cp:[0,1,2,3]},ne={co:[0,0,2,0],mp:x(12),wp:I([3,6,10],12),cp:[0,1,2,3]},le={co:[0,0,0,2],mp:x(12),wp:I([4,8,5],12),cp:[0,1,2,3]},oe={co:[2,0,0,0],mp:v([[1,9,11],[7,3,5]],12),wp:v([[1,9,11],[7,3,5]],12),cp:[0,2,3,1]},ie={co:[0,2,0,0],mp:v([[0,7,2],[6,1,8]],12),wp:v([[0,7,2],[6,1,8]],12),cp:[3,1,0,2]},ae={co:[0,0,2,0],mp:v([[3,6,10],[9,0,4]],12),wp:v([[3,6,10],[9,0,4]],12),cp:[1,3,2,0]},pe={co:[0,0,0,2],mp:v([[4,8,5],[10,2,11]],12),wp:v([[4,8,5],[10,2,11]],12),cp:[2,0,1,3]},M=[oe,ie,ae,pe,te,re,ne,le],fe=["u","l","r","b","U","L","R","B"],y=8,j=4;function F(e,t){return e>=4&&t>=4?!0:e<4&&t<4?e===t:(e^t)===4}function ue(e){let t=["0","","'"];return e.map(([n,o])=>fe[n]+t[o]).join(" ")}function _e(){let e=Array(4);for(let o=0;o<4;o++)e[o]=h(3);let t=$(h(k(6)/2),6);for(let o=0,i=0;o<6;o++){let l=o===5?i:h(2);i^=l,t[o]+=l*6,t[o+6]=(t[o]+6)%12}let r=$(h(k(12)/2),12),n=$(h(k(4)/2),4);return{co:e,mp:t,wp:r,cp:n}}function ce(){return se(_e(h))}function me(e=!0,t=!1){let r=ue(ce());if(!e)return r;let n=["u","l","r","b"],o=["0","","'"];if(!t){for(let p=0;p<4;p++){let u=h(3);u!==0&&(r+=` ${n[p]}${o[u]}`)}return r.trim()}let i=[],l=[],a=[];for(let p=0;p<4;p++)i[p]=h(3),l[p]=h(3),a[p]=(i[p]-l[p]+3)%3;let f=p=>p.filter(u=>u!==0).length;for(;!(f(l)>=1&&f(a)>=1&&f(l)+f(a)>=4);)for(let p=0;p<4;p++)l[p]=h(3),a[p]=(i[p]-l[p]+3)%3;let _=l.map((p,u)=>p!==0?`${n[u]}${o[p]} `:"").join(""),c=a.map((p,u)=>p!==0?` ${n[u]}${o[p]}`:"").join("");return _+r+c}function se(e){let t=we(e),r=[z(),G()],n=[Ae(),Me()],o=ge(t),i,l=new Set,a=performance.now();for(let f=0;f<22;f++){let{value:_,done:c}=o.next(),p=e;for(let[S,b]of _)for(let A=0;A<b;A++)p=ee(p,M[S]);let u=JSON.stringify(p);if(l.has(u))continue;l.add(u);let m=xe(p),O=i?i.length-_.length-1:999999,d=Oe(m,r,n,O).next().value;if(d!==void 0&&((i===void 0||i.length>_.length+d.length)&&(i=_.concat(d)),performance.now()-a>300))break}return i}function he(e){return e[3^e.indexOf(3)]}function we(e){let t=g(U(e.mp),e.wp),r=(e.co.reduce((n,o)=>n+o)-he(e.cp)+3)%3;return[0,1,2,3,4,5].map(n=>n+6*t.indexOf(n)+72*t.indexOf(n+6)+864*r)}var ve=[],H=[],de=[],L=[];for(let e=0;e<y;e++){let t=M[e];ve[e]=t.mp,H[e]=U(t.mp),de[e]=t.wp,L[e]=U(t.wp)}var N=[0,0,0,0,2,2,2,2],C=[[14,-1,-1,11,11,10,9,8,8,7,7,6,4,5,5,3,4,4,2,3,4,3,-1,-1,0],[13,-1,-1,11,10,10,9,8,8,7,7,6,4,5,5,3,4,4,2,3,3,1,-1,-1,6]],R=new Int8Array(55);for(let e=0;e<25;e++)R[e]=C[0][e],R[e+30]=C[1][e];var w=new Int8Array(6*12*12*3);for(let e=0;e<6;e++)for(let t=0;t<12;t++)for(let r=0;r<12;r++){let n=e+6*t+72*r,o=2;t===e?o++:t===(e+6)%12&&o--,r===(e+6)%12?o++:r===e&&o--,w[n]=o,w[n+6*12*12]=w[n+2*6*12*12]=o+5}function*ge(e){let t=0,r=T(),n=ye();for(;;)yield*E(J(...e,r,n,t,-1)),t++}function*J(e,t,r,n,o,i,l,a,f,_){let c=y,p=w[e]+w[t]+w[r]+w[n]+w[o]+w[i],u=Math.max(a[e%864+t*864],a[r%864+t*864],a[o%864+t*864],a[e%864+n*864],a[r%864+n*864],a[o%864+n*864],a[e%864+i*864],a[r%864+i*864],a[o%864+i*864],a[e%864+r*864],a[e%864+o*864],a[r%864+o*864],a[t%864+n*864],a[t%864+i*864],a[n%864+i*864],R[p]);if(!(u>f)){if(f===0){yield[];return}if(!(u===0&&f===1))for(let m=0;m<c;m++){if(m===_||m<_&&F(m,_))continue;let O=e,d=t,S=r,b=n,A=o,q=i;for(let B=1;B<=2;B++){O=l[O][m],d=l[d][m],S=l[S][m],b=l[b][m],A=l[A][m],q=l[q][m];let W=J(O,d,S,b,A,q,l,a,f-1,m);for(;;){let{value:X,done:Y}=W.next();if(Y)break;yield[[m,B]].concat(X)}}}}}function xe(e){let t=e.mp,r=D(t.slice(0,6).map(l=>l%6)),n=t.slice(0,5).map((l,a)=>(l>=6)*2**a).reduce((l,a)=>l+a),o=e.co.map((l,a)=>l*3**a).reduce((l,a)=>l+a),i=e.cp.indexOf(0);return[r+360*i,n+32*o]}var s={};function P(){if(s.phase1pm)return s.phase1pm;let e=Array(6*12*12).fill().map(()=>Array(y).fill(-1));for(let t=0;t<6;t++)for(let r=0;r<12;r++)for(let n=0;n<12;n++){if(r===n)continue;let o=t+6*r+72*n;for(let i=0;i<y;i++){let l=H[i][t],a=L[i][r],f=L[i][n];l<6?e[o][i]=l+6*a+72*f:e[o][i]=l-6+6*f+72*a}}return s.phase1pm=e}function T(){if(s.phase1pcm)return s.phase1pcm;let e=P(),t=Array(e.length*3).fill().map(()=>Array(y).fill(-1));for(let r=0;r<e.length;r++)for(let n=0;n<y;n++){let o=e[r][n];t[r][n]=o+6*12*12*N[n],t[r+6*12*12][n]=o+6*12*12*((N[n]+1)%3),t[r+2*6*12*12][n]=o+6*12*12*((N[n]+2)%3)}return s.phase1pcm=t}function ye(){if(s.phase1p2cp)return s.phase1p2cp;let e=P(),t=T(),r=new Int8Array((6*12*12)**2*3);r.fill(-1);let n=[0,1,2,3,4,5].map(i=>i+6*i+72*(i+6));for(let i=0;i<6;i++)for(let l=0;l<6;l++)i!==l&&(r[n[i]+864*n[l]]=0);let o=0;for(;;){let i=!1;for(let l=0;l<r.length;l++){if(r[l]!==o)continue;let a=l%864,f=Math.floor(l/864);for(let _=0;_<y;_++){let c=a,p=f;for(let u=1;u<=2;u++){c=e[c][_],p=t[p][_];let m=c+864*p;r[m]===-1&&(i=!0,r[m]=o+1)}}}if(!i)break;o++}return s.phase1p2cp=r}function z(){if(s.phase2pm)return s.phase2pm;let e=Array(1440).fill().map(()=>Array(j));for(let t=0;t<360;t++){let r=$(t,6);for(let n=0;n<6;n++)r[n+6]=r[n]+6;for(let n=0;n<j;n++){let o=g(r,M[n].mp),i=D(o.slice(0,6).map(l=>l%6));for(let l=0;l<4;l++){let a=M[n].cp[l];e[t+360*a][n]=i+360*l}}}return s.phase2pm=e}function G(){if(s.phase2om)return s.phase2om;let e=Array(32*81).fill().map(()=>Array(j));for(let t=0;t<32;t++){let r=[0,1,2,3,4].map(o=>t>>o&1);r[5]=r.reduce((o,i)=>o^i);let n=[];for(let o=0;o<6;o++)n[o]=o+6*r[o],n[o+6]=o+6*(r[o]^1);for(let o=0;o<81;o++){let i=[0,1,2,3].map(l=>Math.floor(o/3**l)%3);for(let l=0;l<j;l++){let f=g(n,M[l].mp).slice(0,5).map(u=>+(u>=6)),_=0;for(let u=0;u<5;u++)_+=f[u]<<u;let c=i.map((u,m)=>(u+M[l].co[m])%3),p=0;for(let u=0;u<4;u++)p+=c[u]*3**u;e[t+32*o][l]=_+32*p}}}return s.phase2om=e}function Ae(){return s.phase2pp?s.phase2pp:s.phase2pp=K(z(),[0])}function Me(){return s.phase2op?s.phase2op:s.phase2op=K(G(),[0])}function K(e,t){let r=e.length,n=e[0].length,o=Array(r).fill(-1),i=t.slice(),l=[],a=0;for(;i.length>0;){l.length=0;for(let f of i)if(o[f]===-1){o[f]=a;for(let _=0;_<n;_++){let c=e[f][_];for(;c!==f;)l.push(c),c=e[c][_]}}[i,l]=[l,i],a+=1}return o}function*Oe(e,t,r,n){let o=e.length,i=0;for(let l=0;l<o;l++)i=Math.max(i,r[l][e[l]]);for(;i<=n;)yield*E(Q(e,t,r,i,-1)),i++}function*Q(e,t,r,n,o){let i=e.length,l=t[0][0].length,a=0;for(let f=0;f<i;f++)a=Math.max(a,r[f][e[f]]);if(!(a>n)){if(n===0){yield[];return}if(!(a===0&&n===1))for(let f=0;f<l;f++){if(f===o||f<o&&F(f,o))continue;let _=e.slice();for(let p=0;p<i;p++)_[p]=t[p][e[p]][f];let c=1;for(;e.some((p,u)=>e[u]!==_[u]);){let p=Q(_,t,r,n-1,f);for(;;){let{value:u,done:m}=p.next();if(m)break;yield[[f,c]].concat(u)}for(let u=0;u<i;u++)_[u]=t[u][_[u]][f];c++}}}}function $e(){return V(this,null,function*(){return me(!1)})}export{$e as randomMasterTetraminxScrambleString};
